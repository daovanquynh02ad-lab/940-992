<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Физиология ЖКТ (902-992)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-bg: #F5F5F5; /* Светлый фон всей страницы */
            --card-bg: #FFFFFF; /* Фон блока вопроса */
            --border-color: #E0E0E0; /* Цвет границ */
            --text-color: #333333; /* Основной цвет текста */
            --question-color: #000000; /* Цвет текста вопроса */
            --selected-highlight: #FFF2CC; /* Желтая подсветка выбранного ответа */
            --selected-border: #FFD633; /* Желтая рамка выбранного ответа (опционально, в примере нет рамки, но для выделения полезно) */
            --correct-bg: #D4EDDA; /* Зеленый фон для правильного ответа */
            --correct-border: #28A745; /* Зеленая рамка */
            --incorrect-bg: #F8D7DA; /* Красный фон для неправильного ответа */
            --incorrect-border: #DC3545; /* Красная рамка */
            --button-bg: #007BFF; /* Синий для кнопок */
            --button-text: #FFFFFF;
            --button-hover: #0056b3;
            --nav-button-bg: #F0F0F0;
            --nav-button-text: #555555;
            --nav-button-hover: #E0E0E0;
            --tg-color: #2481cc;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Похожий на системный шрифт */
        }
        
        body {
            background-color: var(--primary-bg);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 0 80px 0; /* Место для футера */
        }

        .container {
            max-width: 700px; /* Немного шире для лучшего отображения */
            width: 100%;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            /* border-radius: 8px;  Убрал радиус, чтобы было как на картинке, более строго */
            /* padding: 25px; Убрал общий паддинг, чтобы заголовок был на всю ширину */
            display: flex;
            flex-direction: column;
            /* gap: 20px; */
        }

        /* Question Header */
        .question-header {
            text-align: center;
            padding: 10px;
            background-color: #E0E0E0; /* Серый фон заголовка как на картинке */
            border-bottom: 1px solid #999;
            margin-bottom: 0;
        }
        .question-header h2 {
            font-size: 1.2rem; /* Размер как на картинке */
            font-weight: bold;
            margin: 0;
            color: var(--question-color);
        }
        .question-info {
            font-size: 0.8rem;
            color: #555;
            margin-top: 5px;
        }

        /* Question Text */
        .question-text {
            font-size: 1rem;
            font-weight: bold; /* Жирный шрифт вопроса как на картинке */
            line-height: 1.4;
            padding: 10px 15px;
            border-bottom: 1px solid var(--border-color);
            color: var(--question-color);
            background-color: #fff;
        }

        /* Options List */
        .options-list {
            display: flex;
            flex-direction: column;
            /* gap: 0;  Убрал отступы между вариантами */
        }

        .option-item {
            display: flex;
            align-items: center; /* Центрирование по вертикали */
            padding: 8px 15px; /* Компактные отступы */
            border-bottom: 1px solid var(--border-color); /* Разделитель снизу */
            cursor: pointer;
            transition: background-color 0.1s ease;
            font-size: 1rem;
            line-height: 1.3;
            color: var(--text-color);
            position: relative;
        }
        
        .option-item:last-child {
            border-bottom: none;
        }

        .option-item:hover:not(.submitted) {
            background-color: #F8F8F8;
        }

        .option-item.selected:not(.submitted) {
            background-color: var(--selected-highlight);
            /* border: 1px solid var(--selected-border);  Рамка не обязательна, если есть цвет фона */
        }

        .option-prefix {
            font-weight: normal; /* Обычный вес цифр */
            margin-right: 10px;
            flex-shrink: 0; 
            color: var(--text-color);
            width: 20px; /* Фиксированная ширина для выравнивания */
        }

        /* Submitted states */
        .option-item.correct {
            background-color: var(--correct-bg);
            /* border-color: var(--correct-border); */
            color: #155724; 
        }
        .option-item.incorrect {
            background-color: var(--incorrect-bg);
            /* border-color: var(--incorrect-border); */
            color: #721C24; 
        }
        .option-item.missed { 
            /* border: 2px dashed var(--correct-border); */
            background-color: #f0fff4; /* Очень светлый зеленый */
            outline: 2px dashed var(--correct-border);
            outline-offset: -2px;
        }

        .option-item.submitted {
            cursor: default; 
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center; /* Центрирование кнопок */
            align-items: center;
            gap: 10px;
            padding: 15px;
            background-color: #f9f9f9; /* Слегка отличающийся фон для панели кнопок */
            border-top: 1px solid var(--border-color);
        }

        .btn {
            padding: 8px 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
            background-color: #fff; /* Белые кнопки по умолчанию */
            color: #333;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            min-width: 100px;
        }

        .btn:hover:not(:disabled) {
            background-color: #e6e6e6;
        }

        .btn-action {
            background-color: var(--button-bg);
            color: var(--button-text);
            border-color: var(--button-bg);
            font-weight: bold;
        }

        .btn-action:hover:not(:disabled) {
            background-color: var(--button-hover);
            border-color: var(--button-hover);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background-color: #f0f0f0;
        }

        /* Telegram Floating Icon */
        .tg-float {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--tg-color);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 100;
            text-decoration: none;
            transition: transform 0.3s;
        }
        .tg-float:hover { transform: scale(1.1); }
        .tg-label {
            position: absolute; right: 60px; background: rgba(0,0,0,0.7); color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; opacity: 0; transition: 0.3s; white-space: nowrap; pointer-events: none;
        }
        .tg-float:hover .tg-label { opacity: 1; }

        /* Result Screen */
        .result-screen {
            display: none; 
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255,255,255,0.95);
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            z-index: 101;
        }
        .result-screen h2 {
            font-size: 2rem;
            color: #333;
            margin-bottom: 20px;
        }
        .score-display {
            font-size: 3rem;
            font-weight: bold;
            color: var(--button-bg);
            margin-bottom: 20px;
        }
        .result-message {
            font-size: 1.1rem;
            margin-bottom: 30px;
            color: #555;
        }
        .restart-btn {
            background-color: var(--button-bg);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="question-header">
            <h2>Задание №<span id="question-id">902</span></h2>
            <div class="question-info" style="display:none;"> Вопрос <span id="current-q-num">1</span> из <span id="total-q-num">91</span>
            </div>
        </div>

        <div class="question-text" id="question-text">Загрузка вопроса...</div>
        
        <div class="options-list" id="options-area">
            </div>

        <div class="controls">
            <button class="btn" id="prev-btn" onclick="goToPrevQuestion()">← Назад</button>
            <button class="btn btn-action" id="action-btn" onclick="checkAnswer()">Ответить</button>
            <button class="btn" id="next-btn" onclick="goToNextQuestion()">Вперед →</button>
        </div>
    </div>

    <a href="https://t.me/stewonly" target="_blank" class="tg-float">
        <i class="fab fa-telegram-plane"></i>
        <span class="tg-label">Автор: stewonly</span>
    </a>

    <div class="result-screen" id="result-screen">
        <h2>Тест завершен!</h2>
        <div class="score-display" id="final-score">0%</div>
        <p class="result-message">Вы ответили верно на <span id="correct-answers-count">0</span> из <span id="total-questions-count">0</span> вопросов.</p>
        <button class="restart-btn" onclick="location.reload()">Пройти заново</button>
    </div>

    <script>
        // --- ДАННЫЕ ВОПРОСОВ (902-992) ---
        const quizData = [
            {id:902,q:"Укажите особенности, характерные для полого органа:",opts:["имеет строму и паренхиму","имеет паренхиму и дольчатое строение","имеет внутреннюю полость и 3-х слойную стенку","имеет строму и внутреннюю полость"],correct:[2]},
            {id:903,q:"Укажите особенности, характерные для паренхиматозного органа:",opts:["имеет внутреннюю полость и 3-х слойную стенку","имеет паренхиму и дольчатое строение","имеет строму и паренхиму","имеет строму и внутреннюю полость"],correct:[1,2]},
            {id:904,q:"К пищеварительной системе относятся:",opts:["глотка","ротовая полость","желудок","носовая полость","гортань"],correct:[0,1,2]},
            {id:905,q:"К пищеварительной системе относятся:",opts:["тонкая кишка","селезенка","пищевод","гортань"],correct:[0,2]},
            {id:906,q:"Полость рта ограничена:",opts:["щеками, зубами, зевом, небом","щеками, губами, зевом, диафрагмой рта, небом (твердым и мягким)","щеками, губами, деснами с зубами","деснами с зубами, небом (твердым и мягким), диафрагмой рта"],correct:[1]},
            {id:907,q:"Полость рта делится на отделы:",opts:["собственно полость рта и преддверие рта","губы, полость рта и собственно полость рта","щечная область, полость рта и преддверие рта"],correct:[0]},
            {id:908,q:"Секреторная функция в полости рта осуществляется",opts:["только подъязычной слюнной железой","только поднижнечелюстной слюнной железой","малыми и большими слюнными железами","только околоушной слюнной железой"],correct:[2]},
            {id:909,q:"Зев состоит из:",opts:["задней стенки глотки","небные дужки и мягкое небо","пустого пространства","небных дужек, мягкого неба, корня языка"],correct:[3]},
            {id:910,q:"Глотка состоит из:",opts:["3-х частей","2-х частей","4-х частей"],correct:[0]},
            {id:911,q:"Глотка состоит из:",opts:["ротоглотки, носоглотки, гортани","ротоглотки, гортаноглотки, носоглотки","ротоглотки, гортаноглотки, зева","носоглотки, задней стенки, зева"],correct:[1]},
            {id:912,q:"Пищевод –",opts:["имеет четыре сужения","паренхиматозный орган","имеет три сужения","полый орган"],correct:[2,3]},
            {id:913,q:"Мышечная оболочка пищевода состоит из:",opts:["3-х слоев","4-х слоев","2-х слоев","1-го слоя"],correct:[2]},
            {id:914,q:"Желудок состоит из:",opts:["кардиальной части, дна, тела, привратниковой части","дна, тела, ампулы","дна, тела, шейки"],correct:[0]},
            {id:915,q:"Стенка желудка состоит из следующих оболочек:",opts:["мышечной","серозной","адвентициальной","слизистой"],correct:[0,1,3]},
            {id:916,q:"Назовите слои мышечной оболочки желудка:",opts:["круговой","косой","перистый","продольный"],correct:[0,1,3]},
            {id:917,q:"Депонирующая функция желудка осуществляется его:",opts:["привратниковой частью","дном","телом"],correct:[1]},
            {id:918,q:"Какими клетками желудочных желез секретируются пепсины?",opts:["париетальными","эндокринными","главными","добавочными"],correct:[2]},
            {id:919,q:"Какими клетками желудочных желез секретируется соляная кислота?",opts:["мукоцитами","обкладочными","добавочными","главными"],correct:[1]},
            {id:920,q:"Какими клетками желудочных желез секретируется слизь?",opts:["добавочными","главными","эндокринными","обкладочными"],correct:[0]},
            {id:921,q:"Поджелудочная железа –",opts:["полый орган","выделяет панкреатический сок","паренхиматозный орган","выделяет желчь"],correct:[1,2]},
            {id:922,q:"В поджелудочной железе выделяют:",opts:["головку","хвост","ножку","перешеек","тело"],correct:[0,1,4]},
            {id:923,q:"Печень -",opts:["паренхиматозный орган","полый орган","выделяет панкреатический сок","выделяет желчь"],correct:[0,3]},
            {id:924,q:"В печени выделяют:",opts:["призматическую и квадратную доли","переднюю и заднюю доли","левую и правую доли","верхнюю и нижнюю доли"],correct:[2]},
            {id:925,q:"Структурно-функциональной единицей печени является:",opts:["долька","нефрон","ацинус"],correct:[0]},
            {id:926,q:"В желчном пузыре выделяют:",opts:["хвост","дно","шейку","тело","ножку"],correct:[1,2,3]},
            {id:927,q:"В состав желчи входят:",opts:["холестерин","желчные кислоты","желчные пигменты","ферменты","холецистокинин"],correct:[0,1,2]},
            {id:928,q:"Общий желчный проток формируется из:",opts:["протока поджелудочной железы и общего печеночного протока","протока желчного пузыря и протока поджелудочной железы","протока поджелудочной железы и протока желчного пузыря","общего печеночного протока и протока желчного пузыря"],correct:[3]},
            {id:929,q:"Общий желчный проток впадает в:",opts:["двенадцатиперстную кишку","подвздошную кишку","тощую кишку","желчный пузырь"],correct:[0]},
            {id:930,q:"Площадь всасывающей поверхности тонкой кишки увеличивается за счет:",opts:["гаустр","полулунных складок","ворсинок"],correct:[2]},
            {id:931,q:"Тонкая кишка состоит из:",opts:["ампулы и канала","слепой кишки, ободочной кишки, прямой кишки","двенадцатиперстной кишки, тощей кишки, слепой кишки","двенадцатиперстной кишки, тощей кишки, подвздошной кишки"],correct:[3]},
            {id:932,q:"Поперечно-полосатая мускулатура в пищеварительном тракте встречается в:",opts:["верхней части пищевода","желудке","внутреннем сфинктере прямой кишки","наружном сфинктере прямой кишки","глотке"],correct:[0,3,4]},
            {id:933,q:"Мышечная оболочка тонкой кишки состоит из:",opts:["3-х слоев мышц","поперечно-полосатой мускулатуры","2-х слоев мышц","гладкой мускулатуры"],correct:[2,3]},
            {id:934,q:"Укажите слои мышечной оболочки тонкой кишки:",opts:["продольный","косой","круговой"],correct:[0,2]},
            {id:935,q:"Толстая кишка состоит из:",opts:["двенадцатиперстной кишки, сигмовидной кишки, слепой кишки","двенадцатиперстной кишки, тощей кишки, подвздошной кишки","слепой кишки, ободочной кишки, прямой кишки","тощей кишки, поперечно-ободочной кишки, прямой кишки"],correct:[2]},
            {id:936,q:"Мышечная оболочка толстой кишки состоит из:",opts:["3-х слоев мышц","2-х слоев мышц","гладкой мускулатуры","поперечно-полосатой мускулатуры"],correct:[1,2]},
            {id:937,q:"Прямая кишка состоит из:",opts:["сигмовидной кишки, подвздошной кишки","слепой кишки, ободочной кишки","тощей кишки, слепой кишки","ампулы и канала"],correct:[3]},
            {id:938,q:"Ободочная кишка",opts:["состоит из восходящей, поперечной, нисходящей, слепой кишок","состоит из восходящей, поперечной, нисходящей, сигмовидной кишок","относится к толстой кишке","относится к тонкой кишке"],correct:[1,2]},
            {id:939,q:"Депонирующая функция прямой кишки осуществляется ее:",opts:["каналом","изгибами","сфинктерами","ампулой"],correct:[3]},
            {id:940,q:"Органы брюшной полости покрыты:",opts:["серозной оболочкой","сосудистой оболочкой","адвентициальной оболочкой","слизистой оболочкой"],correct:[0]},
            {id:941,q:"Пищеварительными функциями органов желудочно-кишечного тракта являются:",opts:["инкреторная","секреторная","моторная","экскреторная","всасывательная"],correct:[1,2,4]},
            {id:942,q:"Основными ферментами слюны являются:",opts:["альфа-амилаза","трипсин","липаза","мальтаза"],correct:[0,3]},
            {id:943,q:"Перечислите непищеварительные функции слюны:",opts:["экскреторная","ферментативная обработка пищи","участие в артикуляции","защитная"],correct:[0,2,3]},
            {id:944,q:"Какую слюну вырабатывают околоушные слюнные железы?",opts:["слизистую","серозно-слизистую (смешанную)","серозную (белковую)"],correct:[2]},
            {id:945,q:"Альфа-амилаза действует на:",opts:["моносахариды","полисахариды","белки","жиры"],correct:[1]},
            {id:946,q:"Перечислите фазы акта глотания:",opts:["желудочная","пищеводная","глоточная","ротовая"],correct:[1,2,3]},
            {id:947,q:"Пепсиногены желудочного сока активируются:",opts:["трипсином","желчью","энтерокиназой","соляной кислотой"],correct:[3]},
            {id:948,q:"Расщепление (гидролиз) углеводов в пищевом комке происходит под влиянием:",opts:["амилазы поджелудочной железы","амилазы желудка","амилазы слюны","мальтазы слюны"],correct:[2,3]},
            {id:949,q:"Назовите пищеварительные функции слюны:",opts:["ферментативная обработка пищи","бактерицидная","формирование пищевого комка","экскреторная"],correct:[0,2]},
            {id:950,q:"Секрет подъязычной слюнной железы является…",opts:["изотоничным","слизистым","белковым","серозным"],correct:[1]},
            {id:951,q:"Может ли осуществляться всасывание в ротовой полости?",opts:["всасывание начинается только в тонком кишечнике","в полости рта всасывание невозможно","всасывание начинается только в толстом кишечнике","всасывание начинается только в желудке","только некоторых веществ"],correct:[4]},
            {id:952,q:"По отношению к плазме крови, слюна является…",opts:["изотоничной","гипотоничной","гипертоничной"],correct:[1]},
            {id:953,q:"Подчелюстные железы вырабатывают...",opts:["серозную (белковую) слюну","серозно-слизистую (смешанную) слюну","HCl","слизистую слюну"],correct:[1]},
            {id:954,q:"Основной объем секреции в полости рта обеспечивается:",opts:["подчелюстными железами","околоушными железами","подъязычными железами","одиночными железами слизистой полости рта"],correct:[0]},
            {id:955,q:"рН слюны составляет:",opts:["8,5 - 9,2","3,2 - 4,5","1,5 - 2,0","6,8 - 7,4"],correct:[3]},
            {id:956,q:"Мальтаза действует на:",opts:["полисахариды","жиры","белки","дисахариды"],correct:[3]},
            {id:957,q:"В состав желудочного сока входят:",opts:["пепсины","мальтаза","липаза","энтерокиназа"],correct:[0,2]},
            {id:958,q:"Рецепторы, раздражение которых вызывает рефлекс глотания, располагаются на …",opts:["поверхности корня языка","боковой поверхности языка","средней трети языка","передней трети языка"],correct:[0]},
            {id:959,q:"Гастриксин представляет собой:",opts:["мальтазу","протеолитический фермент","изоформу пепсина","пепсиноген"],correct:[1,2]},
            {id:960,q:"Пепсины действуют на:",opts:["аминокислоты","дисахариды","жиры","белки"],correct:[3]},
            {id:961,q:"Функциями соляной кислоты желудочного сока являются:",opts:["активация липазы","бактерицидное действие","регуляция работы пилорического сфинктера","активация пепсиногенов","эмульгирование жиры","денатурация белков"],correct:[1,2,3,5]},
            {id:962,q:"Запись жевательных движений нижней челюсти называется:",opts:["мастикациографией","миографией","гнатодинамометрией","гастрографией"],correct:[0]},
            {id:963,q:"Действие ферментов желудочного сока осуществляется в:",opts:["щелочной среде","нейтральной среде","кислой среде","не зависит от кислотности среды"],correct:[2]},
            {id:964,q:"В ротовой полости начинается расщепление:",opts:["белков","нуклеотидов","углеводов","жиров"],correct:[2]},
            {id:965,q:"Куриный белок в прокипяченном желудочном соке...",opts:["набухнет","полностью расщепится","окрасится в фиолетовый цвет"],correct:[0]},
            {id:966,q:"Ферментами, входящими в состав желудочного сока являются:",opts:["трипсин","гастрин","секретин","пепсины"],correct:[3]},
            {id:967,q:"Активную среду в желудке на высоте пищеварения создает:",opts:["пепсин","фосфатный буфер","бикарбонат","соляная кислота"],correct:[3]},
            {id:968,q:"Протеолитическими ферментами желудка являются:",opts:["гастрин","трипсин","секретин","пепсин"],correct:[3]},
            {id:969,q:"Денатурацию и набухание белков в желудке вызывает:",opts:["гастрин","соляная кислота","пепсин","слизь"],correct:[1]},
            {id:970,q:"Белки в желудке расщепляются до:",opts:["альбумоз и пептонов","аминокислот","углекислого газа, воды и азотистых соединений"],correct:[0]},
            {id:971,q:"Внутренний фактор Касла (гастромукопротеин):",opts:["обеспечивает необходимую рH желудочного сока","необходим для всасывания железа","активирует пепсиногены","необходим для всасывания витамина B12"],correct:[3]},
            {id:972,q:"Чувство изжоги возникает вследствие…",opts:["процесса попадания содержимого желудка в пищевод","процесса нейтрализации кислого содержимого пищи","процесса попадания содержимого пищевода в желудок","работы механизмов, обеспечивающих попадание пищи в желудок"],correct:[0]},
            {id:973,q:"Гастроэзофагальный рефлюкс представляет собой:",opts:["процесс попадания содержимого пищевода в желудок","процесс попадания содержимого желудка в пищевод","механизмы, обеспечивающие попадание пищи в желудок","процесс нейтрализации кислого содержимого пищи"],correct:[1]},
            {id:974,q:"Анемия после удаления части желудка развивается вследствие недостатка…",opts:["фибринстабилизирующего фактора","внутреннего фактора Касла","пепсиногена","фактора Хагемана","внешнего фактора Касла"],correct:[1]},
            {id:975,q:"рН желудочного содержимого натощак составляет:",opts:["3,1-4,0","7,0-8,5","1,5-2,0","0,1-0,8"],correct:[2]},
            {id:976,q:"рН желудочного содержимого в желудочную фазу может достигать:",opts:["3,1-4,0","7,0-8,5","0,8-1,0","1,5-2,0"],correct:[2]},
            {id:977,q:"рН желудочного содержимого во время приема пищи составляет:",opts:["3,1-4,0","0,8-1,0","1,5-2,0","8,0-9,0"],correct:[0]},
            {id:978,q:"Протеолитические ферменты секрета желудка в щелочной среде…",opts:["ингибируются","не изменяют своих свойств","активируются"],correct:[0]},
            {id:979,q:"С наименьшей скоростью из желудка эвакуируются…",opts:["белки","витамины","жиры","углеводы"],correct:[2]},
            {id:980,q:"Желудочный секрет имеет наибольшую кислотность при переваривании…",opts:["балластных веществ","жиров","углеводов","белков"],correct:[3]},
            {id:981,q:"Причиной анемии при удалении желудка или его значительной части является:",opts:["дефицит аминокислот","дефицит железа","дефицит витамина B12","недостаток гастрина"],correct:[2]},
            {id:982,q:"Функцию депонирования пищи выполняет:",opts:["тонкий кишечник","желудок","прямая кишка","толстый кишечник"],correct:[1]},
            {id:983,q:"Величина суточного объема желудочного секрета у взрослого человека составляет:",opts:["1,5-3 л","более 3 л","0,5-0,7 л","0,1-0,3 л"],correct:[0]},
            {id:984,q:"Компонентом желудочного секрета, предохраняющий слизистую оболочку желудка от самопереваривания является:",opts:["соляная кислота","липаза","муцин","пепсин","гастриксин"],correct:[2]},
            {id:985,q:"Защита слизистой оболочки желудка от действия агрессивных факторов не осуществляется с помощью:",opts:["слизистого барьера","высокой степени регенерации слизистой оболочки","пепсина, соляной кислоты","лизоцима, муцина"],correct:[2]},
            {id:986,q:"Прием алкоголя натощак вызывает быстрое опьянение поскольку:",opts:["происходит его всасывание в тонком кишечнике","происходит его всасывание в желудке","происходит его всасывание в ротовой полости","активируется его метаболизм"],correct:[1]},
            {id:987,q:"Открытию пилорического сфинктера желудка способствуют:",opts:["щелочная среда в пилорическом отделе желудка и в 12-перстной кишке","кислая среда в пилорическом отделе желудка и в 12-перстной кишке","кислая среда в пилорическом отделе желудка и щелочная в 12-перстной кишке","щелочная среда в пилорическом отделе желудка и кислая в 12-перстной кишке"],correct:[2]},
            {id:988,q:"Кривые желудочной секреции, полученные И.П. Павловым экспериментальным путем отражают:",opts:["степень переваривания жиров, белков и углеводов в желудке","скорость поступления пищи в желудок","скорость опорожнения желудка","объем депонированной в желудке пищи","приспособительный характер секреции желудка к количеству и составу пищи"],correct:[4]},
            {id:989,q:"Ферментативной обработке в желудке подвергаются:",opts:["белки, эмульгированные жиры и незначительно углеводы","только жиры","только белки","только белки и эмульгированные жиры","только эмульгированные жиры и углеводы"],correct:[0]},
            {id:990,q:"К повреждающим факторам желудочного сока относятся:",opts:["достаточное кровоснабжение слизистой оболочки","регенерация эпителиальных клеток в слизистой оболочке","соляная кислота и пепсин","желудочная слизь (муцины)"],correct:[2]},
            {id:991,q:"Электрогастрография – это регистрация суммарной электрической активности…",opts:["кишечника","стенки сосудов","двенадцатиперстной кишки","желудка"],correct:[3]},
            {id:992,q:"Одновременная и полная характеристика секреторной и моторной функции желудка осуществляется с помощью:",opts:["зондирования желудка","рентгеноскопии","рентгенографии","электрогастрографии"],correct:[0]}
        ];

        // --- СОСТОЯНИЕ ТЕСТА ---
        let currentQuestionIndex = 0;
        
        // Инициализация состояния пользователя для всех вопросов
        let userAnswers = Array(quizData.length).fill(null).map(() => ({
            selectedOptions: new Set(), // Выбранные индексы ответов
            isSubmitted: false,       // Нажата ли кнопка "Ответить"
            isCorrect: false          // Правильно ли ответил
        }));

        // --- ЭЛЕМЕНТЫ DOM ---
        const questionIdEl = document.getElementById('question-id');
        const questionTextEl = document.getElementById('question-text');
        const optionsAreaEl = document.getElementById('options-area');
        const currentQNumEl = document.getElementById('current-q-num');
        const totalQNumEl = document.getElementById('total-q-num');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const actionBtn = document.getElementById('action-btn');
        const resultScreen = document.getElementById('result-screen');
        const finalScoreEl = document.getElementById('final-score');
        const correctAnswersCountEl = document.getElementById('correct-answers-count');
        const totalQuestionsCountEl = document.getElementById('total-questions-count');

        // --- ФУНКЦИИ ---

        function renderQuestion() {
            const currentData = quizData[currentQuestionIndex];
            const state = userAnswers[currentQuestionIndex];

            // Обновляем заголовки
            questionIdEl.textContent = currentData.id;
            questionTextEl.textContent = currentData.q;
            currentQNumEl.textContent = currentQuestionIndex + 1;
            totalQNumEl.textContent = quizData.length;

            // Очищаем варианты ответов
            optionsAreaEl.innerHTML = '';

            // Генерируем варианты ответов
            currentData.opts.forEach((optText, idx) => {
                const div = document.createElement('div');
                div.className = 'option-item';
                
                // Префикс 1), 2) и т.д.
                const prefix = document.createElement('span');
                prefix.className = 'option-prefix';
                prefix.textContent = `${idx + 1})`;
                div.appendChild(prefix);

                // Текст ответа
                const textSpan = document.createElement('span');
                textSpan.textContent = optText;
                div.appendChild(textSpan);

                // Логика отображения состояния (отвечено или нет)
                if (state.isSubmitted) {
                    div.classList.add('submitted');
                    
                    // Если это правильный ответ - красим в зеленый
                    if (currentData.correct.includes(idx)) {
                        div.classList.add('correct');
                        // Если правильный ответ НЕ был выбран пользователем - помечаем (опционально)
                        if (!state.selectedOptions.has(idx)) {
                            div.classList.add('missed');
                        }
                    }
                    
                    // Если пользователь выбрал этот ответ
                    if (state.selectedOptions.has(idx)) {
                        // Если он неправильный - красим в красный
                        if (!currentData.correct.includes(idx)) {
                            div.classList.add('incorrect');
                        }
                    }
                } else {
                    // Если еще не ответили - просто подсветка выбранного желтым
                    if (state.selectedOptions.has(idx)) {
                        div.classList.add('selected');
                    }
                    // Добавляем обработчик клика только если не отвечено
                    div.onclick = () => toggleOption(idx);
                }

                optionsAreaEl.appendChild(div);
            });

            updateButtonsState(state);
        }

        function toggleOption(idx) {
            const state = userAnswers[currentQuestionIndex];
            if (state.isSubmitted) return;

            if (state.selectedOptions.has(idx)) {
                state.selectedOptions.delete(idx);
            } else {
                state.selectedOptions.add(idx);
            }
            renderQuestion(); // Перерисовываем для обновления стилей
        }

        function updateButtonsState(state) {
            // Кнопка "Назад"
            prevBtn.disabled = (currentQuestionIndex === 0);

            // Кнопка "Ответить"
            if (state.isSubmitted) {
                actionBtn.disabled = true;
                actionBtn.textContent = 'Отвечено';
                actionBtn.style.opacity = '0.5';
                actionBtn.style.cursor = 'default';
            } else {
                actionBtn.disabled = (state.selectedOptions.size === 0);
                actionBtn.textContent = 'Ответить';
                actionBtn.style.opacity = '1';
                actionBtn.style.cursor = 'pointer';
            }

            // Кнопка "Вперед" / "Завершить"
            if (currentQuestionIndex === quizData.length - 1) {
                nextBtn.textContent = 'Завершить';
                nextBtn.onclick = showResults;
            } else {
                nextBtn.textContent = 'Вперед →';
                nextBtn.onclick = goToNextQuestion;
            }
        }

        function checkAnswer() {
            const state = userAnswers[currentQuestionIndex];
            if (state.isSubmitted) return;

            const currentData = quizData[currentQuestionIndex];
            state.isSubmitted = true;

            // Сравнение массивов выбранных и правильных ответов
            const userArr = Array.from(state.selectedOptions).sort();
            const correctArr = [...currentData.correct].sort();
            
            // Полное совпадение (для мультивыбора и одиночного)
            const isMatch = JSON.stringify(userArr) === JSON.stringify(correctArr);
            state.isCorrect = isMatch;

            renderQuestion(); // Перерисовываем, чтобы показать цвета
        }

        function goToNextQuestion() {
            if (currentQuestionIndex < quizData.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        function goToPrevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        function showResults() {
            // Подсчет правильных ответов
            const correctCount = userAnswers.filter(s => s.isCorrect).length;
            const total = quizData.length;
            const percent = Math.round((correctCount / total) * 100);

            finalScoreEl.textContent = `${percent}%`;
            correctAnswersCountEl.textContent = correctCount;
            totalQuestionsCountEl.textContent = total;

            resultScreen.style.display = 'flex';
        }

        // Запуск при загрузке
        renderQuestion();

    </script>
</body>
</html>
